.const
; 配置参数
WINDOW_WIDTH EQU 768 ; 窗口宽度
WINDOW_HEIGHT EQU 512 ; 窗口高度
BUFFER_SIZE EQU 24 ; 缓冲大小
RENDER_OBJ_SIZE EQU 16 ;绘制集合大小

FPS EQU 60 ; 帧率
FONT BYTE "LanaPixel", 0 ; 字体
FONT_COLOR DWORD 0D6AB00h ; 字体颜色

HORIZON_HEIGHT EQU 32; 地面y坐标
GOOSE_INITIAL_X EQU 32 ;鹅初始x坐标
GOOSE_INITIAL_Y EQU HORIZON_HEIGHT ;鹅初始y坐标

GOOSE_INTERVAL  EQU 100h ; 鹅走动间隔
BIRD_INTERVAL   EQU 100h ; 鸟扇动翅膀间隔

; 这里定义都使用整数而不是浮点数
GINIT_VX   EQU 400      ; 全局x方向速度
GLIMI_VX   EQU 800      ; 全局x方向最大速度
DELTA_GVX  EQU 4        ; 每10秒速度增量
ACCER_INTERVAL EQU 80h

JUMP_VY    EQU 1000      ; 鹅初始弹跳速度

G          EQU 3000     ; 游戏内部重力加速度
JUMPA      EQU 1000      ; 弹跳辅助加速度

INTERVAL_MIN EQU  WINDOW_WIDTH/3   ; 障碍物随机间隔最小值
INTERVAL_MAX EQU  WINDOW_WIDTH   ; 障碍物随机间隔最大值

BIRD_HEIGHT_MIN EQU  WINDOW_HEIGHT/8  ; 鸟高度最小值(都是相对于地面)
BIRD_HEIGHT_MAX EQU  WINDOW_HEIGHT/2  ; 鸟高度最大值

CLOUD_HEIGHT_MIN EQU WINDOW_HEIGHT/4 ;  云层高度最小值（相对于窗口）
CLOUD_HEIGHT_MAX EQU WINDOW_HEIGHT ;  云层高度最大值

BIRD_VX     EQU  20       ; 鸟相对于地面的速度

CLOUD_VX    EQU  80      ; 云相对于地面的速度(不要用负数)
CLOUD_INTERVAL EQU  WINDOW_WIDTH/4  ; 云最低间隔（最好要大于1/4的窗口宽度）

SCORE_RATIO  EQU 100     ;分数系数，防止太大太快

RESTART_INTERVAL EQU 1000 ; 重新开始间隔 单位ms



; 图片结构体
Image STRUCT
    id DWORD ? ; 资源ID
    mask_color DWORD ? ; 透明色
    w DWORD ? ; 宽度
    h DWORD ? ; 高度
    h_dc DWORD ? ; DC句柄
    h_bmp DWORD ? ; BMP句柄
    a_mask DWORD ? ; w*h的数组 每个元素为BYTE 表明位置是否有像素 0无否则有
Image ENDS

; 绘制元素结构体
RenderObject STRUCT
    obj_id DWORD ? ; 元素的ID
    x DWORD ? ; 画布上的X坐标
    y DWORD ? ; 画布上的Y坐标
    z DWORD ? ; 优先级,取值为0,1,2, 优先级越高越先绘制
    p_image DWORD ? ; 图片指针
    lasttsp DWORD ?; 元素最近更新的时间 单位毫秒
    phsx REAL4 ? ; 元素物理X坐标
    phsy REAL4 ? ; 元素物理Y坐标
    vx REAL4 ? ; 元素X方向速度
    vy REAL4 ? ; 元素Y方向速度
RenderObject ENDS

; 绘制元素ID
OBJ_NONE EQU 0  ;空
OBJ_BKG  EQU 1  ;背景
OBJ_GOOSE EQU 2 
OBJ_CLOUD EQU 3

OBJ_BIRD      EQU 4
OBJ_BADGE     EQU 5
OBJ_GYM       EQU 6
OBJ_MUSEUM    EQU 7
OBJ_LIBRARY   EQU 8
OBJ_STONE     EQU 9
OBJ_GATE      EQU 10


OBSTACLE_START EQU $
$obj_array dword OBJ_BIRD , IMAGE_BIRD0_ID , OBJ_BADGE , IMAGE_BIT_BADGE_ID , OBJ_GYM , IMAGE_GYM_ID , OBJ_MUSEUM , IMAGE_MUSEUM_ID , OBJ_LIBRARY , IMAGE_LIBRARY_ID , OBJ_STONE , IMAGE_STONE_ID , OBJ_GATE , IMAGE_GATE_ID

OBSTACLE_END   EQU $
OBSTACLE_NUM   EQU (OBSTACLE_END-OBSTACLE_START)/8


; 游戏状态
GAME_STATUS_INIT EQU 0 ; 未开始
GAME_STATUS_RUN EQU 1 ; 运行中
GAME_STATUS_OVER EQU 2 ; 结束

; 游戏主结构
GameState STRUCT
    status DWORD ? ; 状态
    time DWORD ? ; 时间 单位毫秒
    score DWORD ? ; 分数
    highest_score DWORD ? ;历史最高分
    background_color DWORD ? ; 背景颜色
    render_object_size DWORD ? ; 绘制元素数量
    p_a_render_object DWORD ? ; 指向绘制元素数组的指针 数组中每个元素是RenderObject结构体

    global_vx REAL4 ? ; 整体速度（左移为负）
GameState ENDS


; 图片

IMAGES_START EQU $ ; 开始标记

IMAGE_GOOSE_STAND_ID DWORD 101
IMAGE_GOOSE_STAND_MASK_COLOR DWORD 00FF00h
IMAGE_GOOSE_RUN0_ID DWORD 102
IMAGE_GOOSE_RUN0_MASK_COLOR DWORD 00FF00h
IMAGE_GOOSE_RUN1_ID DWORD 103
IMAGE_GOOSE_RUN1_MASK_COLOR DWORD 00FF00h
IMAGE_GOOSE_JUMP_ID DWORD 104
IMAGE_GOOSE_JUMP_MASK_COLOR DWORD 00FF00h

IMAGE_BIT_BADGE_ID DWORD 201
IMAGE_BIT_BADGE_MASK_COLOR DWORD 000000h

IMAGE_BIRD0_ID DWORD 301
IMAGE_BIRD0_MASK_COLOR DWORD 000000h
IMAGE_BIRD1_ID DWORD 302
IMAGE_BIRD1_MASK_COLOR DWORD 000000h


IMAGE_BACKGROUND_ID DWORD 401
IMAGE_BACKGROUND_MASK_COLOR DWORD 000000h

IMAGE_GYM_ID DWORD 501
IMAGE_GYM_MASK_COLOR DWORD 00FF00h

IMAGE_MUSEUM_ID DWORD 601
IMAGE_MUSEUM_MASK_COLOR DWORD 00FF00h

IMAGE_LIBRARY_ID DWORD 701
IMAGE_LIBRARY_MASK_COLOR DWORD 0FF0000h

IMAGE_STONE_ID DWORD 801
IMAGE_STONE_MASK_COLOR DWORD 00FF00h

IMAGE_GATE_ID DWORD 901
IMAGE_GATE_MASK_COLOR DWORD 00FF00h

IMAGE_CLOUD_ID DWORD 1001
IMAGE_CLOUD_MASK_COLOR DWORD 000000h

IMAGE_GAME_OVER_ID DWORD 1101
IMAGE_GAME_OVER_MASK_COLOR DWORD 000000h


IMAGES_END EQU $ ; 结束标记

IMAGES_SIZE EQU (IMAGES_END - IMAGES_START) / 8 ; 计算图片数量

; 音频相关常量
VOICEBUFFER_SIZE EQU         1024
DBTHRESHOLD dword 1024

SOUND_GOOSE_ID DWORD 81
SOUND_BIU_ID DWORD 82